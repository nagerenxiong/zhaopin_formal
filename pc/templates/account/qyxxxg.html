<!-- 顶部 -->
    {% include 'jobs/system/header.html' %}
<link href="{{ STATIC_URL }}css/bootstrap.css" media="screen" rel="stylesheet" type="text/css">
<link href="{{ STATIC_URL }}css/style.css" media="screen" rel="stylesheet" type="text/css">


<link rel="stylesheet" href="{{ STATIC_URL }}css/kongjian.css">
<script src="{{ STATIC_URL }}js/scroll.js" ></script>

<script language="javascript" type="text/javascript" src="{{ STATIC_URL }}js/My97DatePicker/WdatePicker.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/cropbox.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/businessul_old.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/position_old.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/area.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/businessul.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/position.js"></script>

	<!-- 顶部 -->
	<!-- 内容大框 -->
	<div class="lt_content_box">
		<!-- 菜单 -->
        {% include 'jobs/system/menu_account.html' %}
		<!-- 菜单 -->
		<div class="clear">99</div>
		<div class="clear">1</div>
    </div>

		<div class="center clearfix">
			<!-- 修改个人信息 -->
			<div class="f_l" style="width:710px;">
				<div class="grxx_info_box f_l " style="_width:630px;padding-bottom: 40px;margin-top: 0px;">
					<div class="grxx_info_t"style="margin-top: 40px">
						<div class="grxx_pic_box"  >
							<div class="clearfix" style="height:147px">
                                <img src="{{ headHunter.head_portrait }}" name="photo" style="width: 160px;height: 160px;" alt="" class="f_l"  data-toggle="modal" data-target="#touxiang_modal" onerror="notfind(this, 3, '{{ request.session.sex }}')">
                                <dl class="f_l ml25" >
									<dt>
										<span class="f_bold fz20">
                                            {% if headHunter.real_name %}
                                                {{ headHunter.real_name }}
                                            {% else %}
                                                {{ pu.user_name }}
                                            {% endif %}
                                        </span>
                                        {% if headhunter.validStatus and headhunter.validStatus == "2" %}
                                            <i class="iconfont icon-renzhengv2 fz18 c_c8 ml15"></i>
                                            <span class="grxx_tag_b">认证猎头</span>
                                        {% endif %}
{#										<span>隐藏真实姓名</span>#}
{#										<div style="position:relative;display:inline-block;width:50px;height:21px;">#}
{#											<input type="checkbox" id="s4" >#}
{#											<label class="slider-v2" for="s4"></label>#}
{#										</div>#}
									</dt>
									<dd>
                                        {% if tpc %}
                                            {{ tpc.pc_name }}
                                        {% else %}
                                            <a href="#" tabindex="_blank" class="grxx_sqqy_btn mt10"  data-toggle="modal" data-target="#qy_modal">点击申请加入企业</a>
                                        {% endif %}
									</dd>
									<dd class="mt10 fz12">
										<span>擅长行业:</span>
                                        <input type="hidden" id="bisId" />
										<span id="bis">{{ headHunter.businessName }}</span>
									</dd>
									<dd class="mt10 fz12">
										<span>擅长职位:</span>
                                        <input type="hidden" id="jobId"/>
										<span id="job">{{ headHunter.postName }}</span>
									</dd>
								</dl>
							</div>
							<div class="grjj_box mt20">
								{{ pu.introduction }}
								<div class="grjj_border_l"></div>
								<div class="grjj_border_r"></div>
							</div>
							<ul id="changelabellist" class="grxx_tag_box clearfix mt20 oh"  >
                                {% if labelList %}
                                    {% for label in labelList %}
                                        {% if label != '' %}
                                            <li>{{ label }}</li>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
							</ul>
						</div>

						<div class="grxx_pic_box1" style="display:none">
							<div class="clearfix" style="height:147px">
                                <img src="{{ headHunter.head_portrait }}" name="photo" style="width: 160px;height: 160px;" alt="" class="f_l"  data-toggle="modal" data-target="#touxiang_modal" onerror="notfind(this, 3, '{{ request.session.sex }}')" >
								<dl class="f_l ml25" style="margin-bottom: 20px" >
									<dt>
										<span class="f_bold fz20">
                                            {% if headHunter.real_name %}
                                                <input type="text" style="width: 120px;border:none;" placeholder="请填写姓名" value="{{ headHunter.real_name|default:'' }}" id="real_name" />
{#                                                {{ headHunter.real_name }}#}
                                            {% else %}
                                                <input type="text" style="width: 120px;" placeholder="请填写姓名" value="{{ pu.user_name|default:'' }}" id="real_name" />
{#                                                {{ pu.user_name }}#}
                                            {% endif %}
                                        </span>
                                        {% if headhunter.validStatus and headhunter.validStatus == "2" %}
                                            <i class="iconfont icon-renzhengv2 fz18 c_c8 ml15"></i>
                                            <span class="grxx_tag_b">认证猎头</span>
                                        {% endif %}
{#										<span>隐藏真实姓名</span>#}
{#										<div style="position:relative;display:inline-block;width:50px;height:21px;">#}
{#											<input type="checkbox" id="s4" >#}
{#											<label class="slider-v2" for="s4"></label>#}
{#										</div>#}
									</dt>
									<dd>
                                        {% if tpc %}
                                            {{ tpc.pc_name }}
                                        {% else %}
                                            <a href="#" tabindex="_blank" class="grxx_sqqy_btn mt10"  data-toggle="modal" data-target="#qy_modal">点击申请加入企业</a>
                                        {% endif %}
									</dd>
									<dd class="mt10">
										<div class="schy_select">
                                            <span>擅长行业</span>
{#                                            <input type="text" onclick="showBusinessul(this, 3)" value="{{ headHunter.businessName }}" style="cursor:pointer;padding-right:50px;width: 310px;height: 30px;background: url({{ STATIC_URL }}images/glx_bd2.jpg) no-repeat center center;padding-left: 10px;"/>#}
                                            <div id="businessulDiv" onclick="BusinessulControlsShow(3,this)"></div>
                                            <input type="hidden" id="bisIds" value="{{ headHunter.business }}" />
{#                                            <span class="schy_select_l fz12">{{ headHunter.business }}</span><span class="schy_select_r"><i class="iconfont icon-liebiao"></i></span>#}
										</div>
									</dd>
									<dd class="mt10">
										<div class="schy_select">
                                            <span>擅长职位</span>
{#                                            <input type="text" onclick="positionShow(this)" value="{{ headHunter.postName }}" style="cursor:pointer;padding-right:50px;width: 310px;height: 30px;background: url({{ STATIC_URL }}images/glx_bd2.jpg) no-repeat center center;padding-left: 10px;"/>#}
                                            <div id="positionDiv" onclick="PositionControlsShow(5,this)"></div>
                                            <input type="hidden" id="jobIds" value="{{ headHunter.post }}" />
{#											<span class="schy_select_l fz12">{{ headHunter.post }}</span><span class="schy_select_r"><i class="iconfont icon-liebiao"></i></span>#}
										</div>
									</dd>
								</dl>
							</div>
							<div class="grjj_box mt20 grjj_box1">
                                <textarea style="height:100%;width:100%;resize: none;" rows="4" id="introduction" placeholder="请输入个人简介">{{ pu.introduction }}</textarea>
							</div>
							<ul  class="grxx_tag_box clearfix mt20 oh grxx_tag_box1" id="labels">
                                {% if labelList %}
                                    {% for label in labelList %}
                                        {% if label != '' %}
                                            <li>{{ label }}<span style="display:none">X</span></li>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
							</ul>
							<div style="clear:both"></div>
							<div class="mt20 bd_bottom1 oh" style="height:40px">
								<div class="f_r">
                                    <input type="text" name="" id="plabel" style="width:172px;height:28px;border:1px solid #eeeeee" maxlength="4" placeholder="自定义标签最多4个字">
                                    <input type="button" name="" onclick="addTab()" value="贴上" style="background:#c8161d;color:white;border:none;height:29px;width:48px">
                                </div>
                                <div class="f_l">
                                    <span class="f_bold fz16">添加个人标签</span>
                                    <span class="ml15" onclick="changeLabel()">
                                        <input type="hidden" id="pageIndex" value="2" />
                                        <input type="hidden" id="labelSize" value="{{ labelSize }}" />
                                        <a href="javascript:void(0);" style="color:#cb252b" >换一换</a>
                                    </span>
                                </div>
							</div>
							<ul id="changelabellist" class="grxx_tag_box grbq_list mt20 oh">
                                {% if labels %}
                                    {% for label in labels %}
                                        <li><a href="javascript:void(0);">{{ label.dictionary_name }}</a></li>
                                    {% endfor %}
                                {% endif %}
{#								<li class="grbq_list_li_active">单身美女</li><li>单身美女</li><li>单身美女</li><li class="grbq_list_li_active">单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li><li>单身美女</li>#}
							</ul>
							<div style="clear:both"></div>
							<div style="text-align: center;padding-top:20px">
								<input type="button" name="" value="取消" class="btn11" onclick="cancelEdit()" >
                                <input type="button" name="" value="保存" class="btn12 ml25" onclick="updateWorkAndLabel()" >
							</div>
						</div>
						<div class="left_top_border"></div>
					</div>
					<span class="grxx_edit_btn">
						<i class="iconfont icon-wrench"></i>
						编辑
					</span>
				</div>
				<div style="clear: both"></div>
				<div class="grxx_info_c mt20" >
					<div >
						<span class="fz16 f_bold">手机号码:</span>
						<span class="td200">{{ pu.phone }}</span>
						<input type="button" value="更换手机号" class="grxx_btn grxx_btn_bg" id="update_phone"></div>
				    <div style="display:none;height:80px" id="update_phone_box">
						<div>
							<span class="fz16 f_bold">手机号码:</span>
							<input type="text" placeholder="请输新手机号" id="newphone" class="grxx_info_txt">
							<input type="button" name="" value="获取验证码"  class="grxx_btn grxx_btn_bg"></div>
						<div>
							<input type="text" placeholder="请输验证码" class="yz_code_txt grxx_info_txt1">
							<input type="button" name="" value="确认" class="grxx_btn grxx_btn_bg1" onclick="updatePhone()">
                            <input type="button" name="" value="取消" class="btn13 ml15" onclick="cancelUpdate(this, 1)"></div>
					</div>
					<div>
						<span  class="fz16 f_bold">当前邮箱:</span>
						<span class="td200">{{ pu.email }}</span>
						<input type="button" name="" value="验证邮箱"  class="grxx_btn grxx_btn_bg2">
						<input type="button" name="" value="更换邮箱"  class="grxx_btn grxx_btn_bg" id="update_email"></div>
					<div style="display:none" id="update_email_box">
						<span class="fz16 f_bold">当前邮箱:</span>
						<input type="text" id="newemail" class="grxx_info_txt">
						<input type="button" name="" value="确认新邮箱"  class="grxx_btn grxx_btn_bg1" onclick="updateEmail()">
                        <input type="button" name="" value="取消" class="btn13 ml15" onclick="cancelUpdate(this, 2)"></div>
					<div class="left_top_border"></div>
				</div>
			</div>
			<!-- 修改个人信息 -->
			<!-- 侧边栏 -->
			<div class="grxx_sidebar f_r">
				<div class="grxx_sidebar_t" style="height:auto;margin-top: 0px;">
					<div>
						<span class="f_bold">等级</span>
						<span class="ml40 c_c8">{{ pu.account_level|default:0 }}</span>
					</div>
					<div class="bd_bottom1">
						<span class="f_bold">金币</span>
						<img src="/static/images/111_03.png" alt=""class="ml40">
						<span class="c_c8 ml15">{{ pu.gold|default:0 }}</span>
					</div>
					<dl id="grxx_address">
						<div>
						<span class="f_bold">&nbsp;所&nbsp;在&nbsp;地&nbsp;</span>
						<span class="ml40">{{ headHunter.areaValue|default:'' }}</span>
{#						<span class="ml15">东湖区</span>#}
						</div>
						<div>
							<span class="f_bold">当前头衔</span>
							<span class="ml40">{{ headHunter.headhunt_level|default:'' }}</span>
						</div>
						<div class="bd_bottom1">
							<span class="f_bold">工作年限</span>
							<span class="ml40">{{ headHunter.work_yearname|default:'' }}</span>
						</div>
					</dl>
					<dl id="grxx_address1" style="display:none">
						<div>
						<span class="f_bold">&nbsp;所&nbsp;在&nbsp;地&nbsp;</span>
						    <input type="text" name="" id="workAddr" onclick="showArea(this, 1)" value="{{ headHunter.areaValue|default:'' }}" style="width:125px;height:31px;background: url(/static/images/icon-07.png);border: 1px solid #E2E2E2;cursor:pointer">
                            <input type="hidden" name="location" id="areaid" value="{{ headHunter.location|default:'' }}" />
						</div>
						<div>
							<span class="f_bold">当前头衔</span>
                            <select style="width:125px;height:31px;background: url(/static/images/icon-07.png);border: 1px solid #E2E2E2;" id="newtitle">
                                <option value="" selected="selected">--请选择--</option>
                                {% if headNames %}
                                    {% for headName in headNames %}
                                        <option value="{{ headName.dictionary_value }}" {% if headHunter.headhunt_level == headName.dictionary_name %}selected{% endif %}>
                                            {{ headName.dictionary_name }}
                                        </option>
                                    {% endfor %}
                                {% endif %}
                            </select>
{#							<input type="text" name="headhunt_level" id="headName" value="{{ headHunter.headhunt_level }}" style="width:160px;height:31px;background: url(../static/images/icon-07.png);border: 1px solid #E2E2E2;">#}
						</div>
						<div>
							<span class="f_bold">工作年限</span>
{#							<input type="text" name="experience" id="experience" value="{{ headHunter.working_time }}" style="width:160px;height:31px;background: url(../static/images/icon_06.png);border: 1px solid #E2E2E2;">#}
							<!-- <input type="text" onClick="WdatePicker()" name="user_date" id="experience" value="{{ headHunter.working_time }}" placeholder="请选择日期" style="width:125px;height:31px;background: url(/static/images/icon_06.png);border: 1px solid #E2E2E2;"/> -->
								<!-- <span class="o_gznx">12313</span>
								<ul class="ul_gznx">
									<li>11</li>
									<li>11</li>
									<li>11</li>
									<li>11</li>
									<li>11</li>
								</ul> -->
								 <select style="width:125px;height:31px;background: url(/static/images/icon-07.png);border: 1px solid #E2E2E2;" id="gznx">
                                <option value="" selected="selected">--请选择--</option>
                                {% if workyears %}
                                    {% for workyear in workyears %}
                                        {% if workyear.dictionary_value != 12050000 %}
                                            <option value="{{ workyear.dictionary_value }}" {% if headHunter.work_yearname == workyear.dictionary_name %}selected{% endif %}>
                                                {{ workyear.dictionary_name }}
                                            </option>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            </select>
							
						</div>
						<div>
							<input type="button" name="" value="取消" class="btn13 ml15" onclick="cancelOperator()">
                            <input type="button" name="" value="保存" class="btn14" onclick="saveHunter()">
						</div>
					</dl>
					<div class="clearfix" style="padding-left: 20px;">
						<div class="f_l t_c" style="width:90px;padding-left: 0px;">
							<i class="iconfont icon-tianjiayuangong fz20"></i>
							<br>
							<span>被关注人数</span>
							<br>
							<span class="c_c8">{% if headHunter.attentionCount %}{{ headHunter.attentionCount }}{% else %}0{% endif %}</span>
						</div>
						<div class="f_l t_c" style="width:90px;padding-left: 0px;">
							<i class="iconfont icon-tianjiayuangong fz20"></i>
							<br>
							<span>被访问人数</span>
							<br>
							<span class="c_c8">{% if headHunter.pv %}{{ headHunter.pv }}{% else %}0{% endif %}</span>
						</div>
					</div>
					<div class="update_btn" id="update_btn_address">
						<i class="icon-wrench iconfont"></i>
					</div>
				</div>
				<div class="grxx_sidebar_m mt20 lthy_xxglmb_border" style="border-top:2px solid #c8161d">
					<div class="grxx_sidebar_m_title">服务好评分</div>
					<div class="mt10">
						<span>评分：</span>
                        {% if headHunter.evaluation_value >= 1 %}
						    <img src="/static/images/ii_15.jpg" alt="">
                        {% else %}
                            <img src="/static/images/ii_17.png" alt="">
                        {% endif %}
                        {% if headHunter.evaluation_value >= 2 %}
						    <img src="/static/images/ii_15.jpg" alt="">
                        {% else %}
                            <img src="/static/images/ii_17.png" alt="">
                        {% endif %}
                        {% if headHunter.evaluation_value >= 3 %}
						    <img src="/static/images/ii_15.jpg" alt="">
                        {% else %}
                            <img src="/static/images/ii_17.png" alt="">
                        {% endif %}
                        {% if headHunter.evaluation_value >= 4 %}
						    <img src="/static/images/ii_15.jpg" alt="">
                        {% else %}
                            <img src="/static/images/ii_17.png" alt="">
                        {% endif %}
                        {% if headHunter.evaluation_value == 5 %}
						    <img src="/static/images/ii_15.jpg" alt="">
                        {% else %}
                            <img src="/static/images/ii_17.png" alt="">
                        {% endif %}
						<span class="c_66 ml15">{{ headHunter.evaluation_value }}</span>
					</div>
				</div>
				<div class="grxx_sidebar_m mt20 lthy_xxglmb_border" style="border-top:2px solid #c8161d;position:relative">
					<div class="grxx_sidebar_m_title">服务过的企业</div>
					<dl id="grxx_qy_box">
                        <hr style="margin-top: 5px;margin-bottom: 5px;"/>
                        {% if serveCompanyList %}
                            {% for serveCompany in serveCompanyList %}
                                <div class="mt10">
                                    <span class="ml15">{{ serveCompany }}</span>
                                    <hr style="margin-top: 5px;margin-bottom: 5px;"/>
                                </div>
                            {% endfor %}
                        {% endif %}
					</dl>
					<dl style="display:none" id="grxx_qy_box1">
                        {% if serveCompanyList %}
                            {% for serveCompany in serveCompanyList %}
                                <div class="mt10">
                                    <input type="text" name="serveCompany" value="{{ serveCompany }}" style="width:216px;height:30px;background-color: #fafafa;border:1px solid #d9d9d9">
                                </div>
                            {% endfor %}
                        {% endif %}
						<div  class="mt10">
							<img src="/static/images/tj_03.png" alt="" style="cursor:pointer" onclick="addServeCompany(this)">
						</div>
						<div class="t_c" style="padding-top: 20px">
							<input type="button" name="" value="取消" class="btn15" style="border: 0;background-color: #1d99d2;color:white;text-align: center;width:85px;height:32px" onclick="cancelUpdate(this, 3)">
							<input type="button" name="" value="保存" class="btn15" style="border: 0;background-color: #5c91d9;color:white;text-align: center;width:85px;height:32px" onclick="saveServeCompany()">
						</div>
					</dl>
					<div class="update_btn" style="top:20px" id="update_btn_qy">
						<i class="icon-wrench iconfont"></i>
					</div>
				</div>
			</div>
			<!-- 侧边栏 -->
		</div>
		<!-- 内容大框 -->
		<!-- 底部 -->
        {% include 'jobs/system/new_footer.html' %}

		<!-- 模态框（Modal） -->
		<div class="modal fade" id="touxiang_modal" tabindex="-1" role="dialog"
		   aria-labelledby="myModalLabel" aria-hidden="true">
		   <div class="modal-dialog">
		      <div class="modal-content">
		         <div class="modal-header">
		            <button type="button" class="close" data-dismiss="modal"
		               aria-hidden="true">×
		            </button>
		            <h4 class="modal-title" id="myModalLabel">
		               选择裁剪区域
		            </h4>
		         </div>
		         <div class="modal-body" style="height:300px;">
                     <div class="t_c">
                     <div class="container" style="padding:0;margin:20px 0 0 0">
                        <div  class="imageBox" style=" background-size: 200px 230px; background-position: -50px -50px; background-repeat: no-repeat;">
                            <div class="thumbBox" ></div>
                            <img src="{{ pu.head_portrait }}" class="img_box" width="200" height="230">
                            <div class="tmc"></div>
                        <p class="title">
                            更换产品照片<br>230px*200 px  文件小于5M</p>
                        </div>
                        <div class="action">
                            <div class="new-contentarea tc">
                                <a href="javascript:void(0)" class="upload-img">
                                    <label for="upload-file">上传图像</label>
                                </a>
                                <input type="file" class="upload-file" name="upload-file">
                            </div>
                        </div>
                     </div>
                     </div>
{#		            <div class="t_c">#}
{#		            	<img src="../static/images/touxiang_03.png" alt="">#}
{#		            </div>#}
{#		            <div>#}
{#		            	您可以在已上传的图片中任意选取区域，选取区域比例必须为正方形。#}
{#		            </div>#}
		         </div>
		         <div class="modal-footer">
		            <button type="button" class="btn btn-default"
		               data-dismiss="modal" style="width:120px;height:40px;background-color: #38b7a9">
		               取消
		            </button>
		            <button type="button" class="btn btn-primary" data-dismiss="modal" style="width:120px;height:40px;background-color: #5c91d9" onclick="updatePhoto()">
		               确认
		            </button>
		         </div>
		      </div><!-- /.modal-content -->
		   </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
		<!-- 模态框（Modal） -->
			<div class="modal fade" id="qy_modal" tabindex="-1" role="dialog"
			   aria-labelledby="myModalLabel" aria-hidden="true">
			   <div class="modal-dialog" style="width:850px">
			      <div class="modal-content" >
			         <div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal"
			               aria-hidden="true">×
			            </button>
			            <h4 class="modal-title" id="myModalLabel">
			               所属企业
			            </h4>
			         </div>
			         <div class="modal-body t_c">
			            搜素企业：<input type="text" id="queryCondition"><input type="button" value="搜索" onclick="queryCompany()">
			             <div>
			            	<img src="{{ STATIC_URL }}images/gh_03.png" alt="">
			            </div>
			            <ul class="ssqy_ul_box clearfix" id="companyul">

			            </ul>
			         </div>
			      </div><!-- /.modal-content -->
			   </div><!-- /.modal-dialog -->
			</div><!-- /.modal -->
		<!-- 底部 -->
    <script src="/static/js/common.js" ></script>
    <script type="text/javascript">
        var img = null;
        $(function(){
            BusinessulControls("businessulDiv","{{ headHunter.businessName | default:"" }}","{{ headHunter.business | default:"" }}",
                'width:250px;margin-top:5px;font-size:14px;');
            PositionControls("positionDiv","{{ headHunter.postName | default:"" }}","{{ headHunter.post | default:"" }}",
                'width:250px;margin-top:5px;font-size:14px;');
        })
        //点击编辑
		$(".grxx_edit_btn").click(function(){
			$(".grxx_pic_box").css('display','none');
			$(".grxx_pic_box1").css('display','block');
		})
        //点击编辑的取消
        function cancelEdit(){
            $(".grxx_pic_box").css('display','block');
			$(".grxx_pic_box1").css('display','none');
        }
		$("#update_btn_qy").click(function(){
			$("#grxx_qy_box").css('display','none')
			$("#grxx_qy_box1").css('display','block')
			$(this).animate({right:"-50px"}, 300);
		})
        //点击修改地点图标
		$("#update_btn_address").click(function(){
			$("#grxx_address").css('display','none');
			$("#grxx_address1").css('display','block');
			$(this).animate({right:"-50px"}, 300);
			
		})
        //点击地点维护的取消
        function cancelOperator(){
            $("#grxx_address").css('display','block');
			$("#grxx_address1").css('display','none');
			$("#update_btn_address").animate({right:"0px"}, 300);
        }
        //取消修改
        function cancelUpdate(obj, type){
            if(type == 1){//手机修改的取消
                $(obj).parent().parent().css('display', 'none');
                $(obj).parent().parent().prev().css('display', 'block');
            }else if(type == 2){//邮箱修改的取消
                $(obj).parent().css('display', 'none');
                $(obj).parent().prev().css('display', 'block');
            }else{//服务过的企业取消
                $("#grxx_qy_box").css('display','block');
			    $("#grxx_qy_box1").css('display','none');
			    $("#update_btn_qy").animate({right:"0px"}, 300);
            }
        }
		$(".grxx_tag_box1 li").mouseover(function(){
			$(this).children().css('display','inline');
		})
		$(".grxx_tag_box1 li").mouseout(function(){
			$(this).children().css('display','none');
		})
		$(".grxx_tag_box1 li span").click(function(){
			$(this).parent().remove();
		})
		$("#update_phone").click(function(){
			$(this).parent().css('display', 'none');
			 $("#update_phone_box").css('display','block');
		})
		$("#update_email").click(function(){
			$(this).parent().css('display', 'none');
			 $("#update_email_box").css('display','block');
		})
		$(".slider-v2").click(function(){
			if($("#s4").attr('checked')=='checked')
			{
			$("#s4").removeAttr('checked');
			$(this).css('background', 'url(/static/images/icon-s.png)');
		    }
		    else
		    {
		    $("#s4").attr('checked','checked');
		    $(this).css('background', 'url(/static/images/icon-f.png)');
		    }
		})
        $(".grxx_info_b").on('click',"#add_qy_btn",function(){
            $(this).remove();
            $(".grxx_info_b ul").append('<li><span class="add_qy_btn_span"></span><input type="text" ><a javascript:void(0)" class="ml15" id="add_qy_btn">继续添加</a></li>');
        })

        //添加标签
        function addTab(){
            var length = $('#labels').children('li').length;
            if(length >= 8){
                window.alert("最多只能添加8个标签");
                return;
            }
            var plabel = $('#plabel').val();
            if(plabel != ''){
                var em = '<li>' + plabel + '<span style="display:none">X</span></li>';
                $('#labels').append(em);
                $("#labels li").mouseover(function(){
                    $(this).children().css('display','inline');
                })
                $("#labels li").mouseout(function(){
                    $(this).children().css('display','none');
                })
                $("#labels li span").click(function(){
                    $(this).parent().remove();
                })
            }else{
                window.alert("请填写要添加的标签！");
            }
        }
        //系统自带标签点击事件处理
        $('.grbq_list li').click(function(){
            var length = $('#labels').children('li').length;
            if(length >= 8){
                window.alert("最多只能添加8个标签");
                return;
            }
            var em = '<li>' + $(this).text() + '<span style="display:none">X</span></li>';
            $('#labels').append(em);
            $("#labels li").mouseover(function(){
                $(this).children().css('display','inline');
            })
            $("#labels li").mouseout(function(){
                $(this).children().css('display','none');
            })
            $("#labels li span").click(function(){
                $(this).parent().remove();
            })
        })
        //换一换标签
        function changeLabel(){
            var pageIndex = $('#pageIndex').val();
            var labelSize = $('#labelSize').val();
            $.ajax({
                type: "POST",
                url: "/jobs/position/headhunter/ajax_changeLabel",
                data: {"p_value": '12001000', 'page': pageIndex},
                dataType: "json",
                success: function(data){
                    $('.grbq_list').children().remove();
                    for(var i = 0;i < data.length;i++){
                        var hlabel = data[i];
                        var em = '<li><a href="javascript:void(0);">'+hlabel.fields.dictionary_name+'</a></li>';
                        $('.grbq_list').append(em);
                    }
                    //设置换一换的页数
                    if((parseInt(pageIndex)) * 8 > labelSize){
                        $('#pageIndex').val(1)
                    }else{
                        $('#pageIndex').val(parseInt(pageIndex) + 1);
                    }
                    //给添加的标签加事件
                    $('.grbq_list li').click(function(){
                        var length = $('#labels').children('li').length;
                        if(length >= 8){
                            window.alert("最多只能添加8个标签");
                            return;
                        }
                        var em = '<li>' + $(this).text() + '<span style="display:none">X</span></li>';
                        $('#labels').append(em);
                        $("#labels li").mouseover(function(){
                            $(this).children().css('display','inline');
                        })
                        $("#labels li").mouseout(function(){
                            $(this).children().css('display','none');
                        })
                        $("#labels li span").click(function(){
                            $(this).parent().remove();
                        })
                    })
                }
            });
        }
        //保存猎头信息(地点、头衔、经验)
        function saveHunter(){
            var location = $('#areaid').val();
            var addr = $('#workAddr').val();
            var headName = $('#newtitle').val();
            var gznx = $('#gznx').val();
            if(addr == '' || headName == '' || gznx == ''){
                window.alert("信息不能为空，请填写数据后保存！");
                return false;
            }
            $.ajax({
                type: "POST",
                url: "/ajax_saveHeadHunt",
                data: {"location": location, 'headhunt_level': headName, 'experience': gznx},
                dataType: "json",
                success: function(data){
                    if(data.msg == '保存成功！'){
                        var title = $('#newtitle').find("option:selected").text();
                        $("#grxx_address").children('div:first').children('span:last').text(addr);
                        $("#grxx_address").children('div:eq(1)').children('span:last').text(title);
                        $("#grxx_address").children('div:eq(2)').children('span:last').text($('#gznx').children('option:selected').text());
                        cancelOperator();
                        alert(data.msg);
                    }
                }
            });
        }
        //添加服务过的企业行
        function addServeCompany(obj){
            var em = '<div class="mt10"><input type="text" name="serveCompany" value="" style="width:216px;height:30px;background-color: #fafafa;border:1px solid #d9d9d9"></div>';
{#            $('input[name="serveCompany"]:last').after(em);#}
            $(obj).parent().before(em);
        }
        //保存服务过的企业
        function saveServeCompany(){
            var serveCompanys = $('input[name="serveCompany"]');
            var serveStr = '';
            //获得不为空的公司
            for(var index = 0;index < serveCompanys.length;index++){
                if(serveCompanys.eq(index).val() != ''){
                    if(serveStr == ''){
                        serveStr = serveCompanys.eq(index).val();
                    }else{
                        serveStr += '**' + serveCompanys.eq(index).val();
                    }
                }
            }
            if(serveStr == ''){
                window.alert('请填写服务过的公司后在保存！');
                return;
            }
            $.ajax({
                type: "POST",
                url: "/ajax_saveServeCompany",
                data: {'serve_company': serveStr},
                dataType: "json",
                success: function(data){
                    if(data.msg == 'success'){
                        //移除原来的预览的企业，重新添加编辑后的企业
                        $("#grxx_qy_box").children('div').remove();
                        for(var index = 0;index < serveCompanys.length;index++){
                            if(serveCompanys.eq(index).val() != ''){
                                var em = '<div class="mt10"><span class="ml15">' + serveCompanys.eq(index).val() + '</span><hr style="margin-top: 5px;margin-bottom: 5px;"/></div>';
                                $("#grxx_qy_box").append(em);
                            }
                        }
                        $("#grxx_qy_box").css('display','block');
                        $("#grxx_qy_box1").css('display','none');
                        $("#update_btn_qy").animate({right:"0px"}, 300);
                    }
                }
            })

        }
        //更新手机号码
        function updatePhone(){
            var phone = $('#newphone').val();
            if(!(/^1[3|4|5|8][0-9]\d{4,8}$/.test(phone))){
                window.alert('你输入的手机号码格式不对，请重新输入！');
                return;
            }
            if(phone != ''){
                $.ajax({
                    type: "POST",
                    url: "/ajax_updatePhone",
                    data: {"phone": phone},
                    dataType: "json",
                    success: function(data){
                        if(data.msg == '更换成功！'){
                            $('#update_phone').prev().text(phone);
                            $('#update_phone').parent().css('display', 'block');
                            $('#update_phone').parent().next().css('display', 'none');
                            window.alert(data.msg);
                        }
                    }
                });
            }
        }
        //更新邮箱
        function updateEmail(){
            var email = $('#newemail').val();
            if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(email)){
                window.alert('你输入的邮箱格式不对，请重新输入');
                return;
            }
            if(email != '') {
                $.ajax({
                    type: "POST",
                    url: "/ajax_updateEmail",
                    data: {"email": email},
                    dataType: "json",
                    success: function (data) {
                        if (data.msg == '更换成功！') {
                            $('#update_email').prev().prev().text(email);
                            $('#update_email').parent().css('display', 'block');
                            $('#update_email').parent().next().css('display', 'none');
                            window.alert(data.msg);
                        }
                    }
                });
            }
        }
        //修改职业及个人标签
        function updateWorkAndLabel(){
            var jobs = $('#jobIds').val();
            var bises = $('#bisIds').val();
            if(bises == ''){
                window.alert("请选择行业！");
                return ;
            }
            if(jobs == ''){
                window.alert('请选择职位！');
                return ;
            }
            var jobIds = $('#jobIds').val();//职业的ID串,对应字典里的dictionary_value值
            var bisIds = $('#bisIds').val();//行业的ID串,对应字典里的dictionary_value值
            var labels = $('#labels').children('li');
            var introduction = $('#introduction').val();
            var newlabels = '';
            var length = labels.length;
            for(var i = 0;i < length;i++){
                newlabels += labels.eq(i).text().replace('X', '') + '**';
            }
            if(newlabels == ''){
                window.alert('请添加标签！');
                return ;
            }
            var real_name = $('#real_name').val();
            if(real_name == ''){
                window.alert('姓名不能为空，请填写姓名');
                return ;
            }
            $.ajax({
                type: "POST",
                url: "/ajax_saveBusiness",
                data: {"business": bisIds, 'post': jobIds, 'labels': newlabels, 'introduction': introduction, 'real_name': real_name},
                dataType: "json",
                success: function(data){
                    if(data.msg == '修改成功！'){
                        //给修改前的div赋值
                        var businessList = $('#businessulDiv').children('span');
                        var businessName = '';
                        for( var m = 0;m < businessList.length;m++){
                            if(businessName == ''){
                                businessName = businessList.eq(m).text();
                            }else{
                                businessName += ',' + businessList.eq(m).text();
                            }
                        }
                        var positionList = $('#positionDiv').children('span');
                        var positionName = '';
                        for( var n = 0;n < positionList.length;n++){
                            if(positionName == ''){
                                positionName = positionList.eq(n).text();
                            }else{
                                positionName += ',' + positionList.eq(n).text();
                            }
                        }
                        $('#job').text(positionName);
                        $('#bis').text(businessName);
                        $('.grxx_tag_box:first').children('li').remove();
                        for(var i = 0;i < length;i++){
                            $('.grxx_tag_box:first').append('<li>' + labels.eq(i).text().replace('X', '') + '</li>');
                        }
                        $('.grjj_box:first').text(introduction);
                        $('.grjj_box:first').append('<div class="grjj_border_l"></div><div class="grjj_border_r"></div>');
                        $('.fz20:first').text(real_name);
                        cancelEdit();
                        window.alert(data.msg);
                    }
                }
            });
        }

        //搜索公司
        function queryCompany(){
            var condition = $('#queryCondition').val();
            $.ajax({
                type: "POST",
                url: "/jobs/resume/ajax_queryCompany",
                data: {
                    "condition": condition,
                    "pc_type": 2
                },
                dataType: "json",
                success: function (data) {
                    $('#companyul').children().remove();
                    for(var i = 0;i < data.length;i++){
                        var company = data[i];
                        var em = '<li class="clearfix"><div class="ssqy_box f_l"><img src="/static/images/gh_04.png" alt="" ></div><div class="f_l ml15" style="text-align: left;_display:inline"><div>' + company.pc_name + '</div>';
                            em += '<div class="mt10"><input type="button" name="" value="确认申请" onclick="applyJoinCompany('+company.id+')" style="width:68px;height:24px;color:white;text-align: center;line-height: 24px;background:#d21d30;border:none"></div></div></li>';
                        $('#companyul').append(em);
                    }
                }
            });
        }
        //申请加入公司
        function applyJoinCompany(companyId){
            if(confirm("你只能申请加入一个企业，你确定要加入该企业吗？")){
                $.ajax({
                    type: "POST",
                    url: "/ajax_applyJoinCompany",
                    data: {"companyId": companyId},
                    dataType: "json",
                    success: function (data) {
                        if(data.msg == 'success'){
                            window.alert("您的申请已接受，请耐心等待管理员的申请，谢谢！");
                        }else{
                            window.alert(data.msg);
                        }
                    }
                });
            }
        }
        function upload_photo(){
            var options ={
                thumbBox: '.thumbBox',
                spinner: '.spinner',
                imgSrc: 'images/avatar.png'
            }
            var cropper = $('.imageBox').cropbox(options);
            $(document).on('change','.upload-file',function(){
                var reader = new FileReader();
                var _this=$(this);
                var add_file_box=$(this).parent();
               $(_this).parent().parent().prev().children('.img_box').attr('src', '');
                 $(_this).parent().parent().prev().children('.thumbBox').show();
                reader.onload = function(e) {
                    $(_this).parent().parent().prev().children('.img_box').attr('src', '');
                    $(_this).parent().parent().prev().children('.thumbBox').show();
                    options.imgSrc = e.target.result;
                    cropper = $('.imageBox').cropbox(options);
                }
                reader.readAsDataURL(this.files[0]);
                this.files = [];
                $(this).remove();
                var input = " <input type=\"file\" name=\"upload-file\" class=\"upload-file\"/>";
                add_file_box.append(input);
            })
            $(document).on('dblclick','.thumbBox',function(){
                img = cropper.getDataURL();
                $(this).hide();
                $(this).next().attr('src', ''+img+'');
            })
            $('#btnZoomIn').on('click', function(){
                cropper.zoomIn();
            })
            $('#btnZoomOut').on('click', function(){
                cropper.zoomOut();
            })
            $(".grxx_tag_box1 li").mouseover(function(){
                    $(this).children().css('display','inline');
                })
            $(".grxx_tag_box1 li").mouseout(function(){
                    $(this).children().css('display','none');
            })
        }
        upload_photo();
        //修改头像
        function updatePhoto(){
            if(img != null){
                $.ajax({
                    type: "POST",
                    url: "uploadFile",
                    data:{
                        "fileType":1,
                        "imgData":img
                    },
                    dataType: "json",
                    success: function(data){
                        if(data.ret == "1"){
                            var path = data.save_name;
                            $.ajax({
                                type: "POST",
                                url: "/ajax_updatePhoto",
                                data:{"path":path},
                                dataType: "json",
                                success: function(data){
                                    $('img[name="photo"]').attr('src', path);
                                }
                            });
                        }else{
                            alert('上传图片失败!');
                            return;
                        }
                    },
                    error: function(XMLHttpRequest, textStatus, errorThrown) {
                            alert(XMLHttpRequest.status);
                            alert(XMLHttpRequest.readyState);
                            alert(textStatus);
                    }
                });
            }
        }
        function positionShow(obj){
            if($('#bisIds').val() != ''){
                showPosition(obj,$("#bisIds").prev().val(),$("#bisIds").val(),5)
            }else{
                window.alert('请选择行业！');
            }
        }
	</script>
</body>
	</html>