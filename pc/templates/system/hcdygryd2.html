<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>{{ title }}</title>
<meta name="description" content="怀才当遇提供专业的人才经纪人服务与互联网领域垂直招聘服务,通过创新独特的结构和模式,以及个性化的优质服务,为您提供职业规划、个性化定制职业形象,帮助用户快速提升职场价值.找工作、找人才、找人才经纪人服务就来怀才当遇网！" />
<meta name="keywords" content="怀才当遇,怀才不遇,怀才当遇招聘,人才经纪人,互联网招聘,移动互联网招聘,微信招聘,微博招聘,高薪职位,互联网圈子,社交招聘,社会招聘" />
<link rel="stylesheet" type="text/css" href="/static/css/style_cjydy.css">
<script type="text/javascript" src="/static/js/jquery.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/position.js"></script>
<script language="javascript" type="text/javascript" src="{{ STATIC_URL }}js/My97DatePicker/WdatePicker.js"></script>
<script  src="{{ STATIC_URL }}js/lib/ind/layer/layer.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/reset.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/basic.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style2.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/pages.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css">
<link rel="stylesheet" href="{{ STATIC_URL }}css/kongjian.css">
{#<link href="{{ STATIC_URL }}css/bootstrap.css" media="screen" rel="stylesheet" type="text/css">#}
<link href="{{ STATIC_URL }}css/style1.css" media="screen" rel="stylesheet" type="text/css">
<link href="{{ STATIC_URL }}css/style_cj.css" media="screen" rel="stylesheet" type="text/css">
</head>
<body>
<style>
    body{
        background: transparent url("/static/images/new_bg.png") repeat scroll center top / cover; }
       .wikz li {  font-weight: normal;width: 20.2%!important;      }
</style>
<script>
// 点击增删active
function active(obj) {
    var aa = new Date();
    if ($(obj).hasClass('active')){
        $(obj).removeClass('active');
        $("input[name='end_time1']").val('').removeAttr('disabled')
    }
    else{
        $(obj).addClass('active');
        $("input[name='end_time1']").val("至今").attr('disabled', 'true');
    }
}
    var alertFram;var timer = null;
    var timer = null;
  var alertFram;
  window.alert = function(txt, type, fun1) {
    var icon = "";
    var qrStr = ""
    clearInterval(timer);
    timer = setInterval(function() {
      if ($("#alertFram")[0]) {
        $("#alertFram").remove();
        clearInterval(timer);
      }
    }, 3900)
    alertFram = $('<div id="alertFram" style="color:#ed4f30;font-size:14px;padding:0px 0px 0px 30px;height:40px;background-color:#fff3de;border:1px solid #ffddc1;position:fixed;left:50%;z-index:999999999;text-align:center;line-height:40px;top:0">' + txt + '<img onclick="$(this).parent().remove()" src="{{ STATIC_URL }}images/x_03.png" style="float:right;cursor:pointer;margin-left:10px;margin-top:14px;margin-right:10px" width="12" height="12"></div>')
    if (arguments[1] != null) {
      if (arguments[1] == 1) {
        icon = "alert_03";
      } else if (arguments[1] == 2) {
        icon = "alert_07";
      } else if (arguments[1] == 3) {
        clearInterval(timer);
        icon = "alert_15";
        qrStr = '<div style="margin-top:20px"><input type="button" id="qr_btn" value="确认" style="width:70px;height:30px;\
               line-height:30px;color:#fff;background-color:#5C91D9;border:0px;border-radius: 5px;font-size:14px;cursor:pointer;"/><input type="button"\
               value="取消" onclick="$(this).parent().parent().remove()" style="width:70px;height:30px;line-\
               height:30px;color:#232323;background-color:#fff;border:0px;border-radius: 5px;font-size:14px;cursor:pointer;"/></div>';
      } else if (arguments[1] == 4) {
        icon = "alert_18";
      }
      alertFram = $('<div id="alertFram" style="color:#232323;font-size:18px;box-shadow: 5px 5px 5px rgba(0,0,0,.4);background-color:#fff;border:1px solid #7E9CC6;border-radius: 5px;position:fixed;left:50%;z-index:999999999;text-align:center;top:50%;padding:10px 20px;white-space:nowrap;"><div style="width:200px;float:left"></div><div style="clear:both"></div><img onclick="$(this).parent().remove()" src="/static/images/alert_11.png" style="float:right;cursor:pointer;margin-right:-9px;" ><img src="/static/images/' + icon + '.png" style="vertical-align:middle;margin-right:10px"/><span style="margin-right:10px">' + txt + '</span>' + qrStr + '</div>')
    }
    if ($("#alertFram")[0]) {
      return;
    }
    $("body").append(alertFram);
    $("#qr_btn").click(function() {
      fun1();
    })
    var width = parseInt(alertFram.css('width'))+40;
    if(arguments[1] != null)
    {
          var height = parseInt(alertFram.height())+20;
         alertFram.css('margin-top', '-' + height/2 + 'px');
    }
    alertFram.css('margin-left', '-' + width/2 + 'px');
  }
</script>
<div class="re_banner" style="width: 100%;height: 100%;">

	<div class="tmbj">
    	<div class="bsbj">
        	<div class="grws2" >
            	<div class="grnkys2">
                <form action="">
                	<ul>
                    	<li>
                        	<input name="pc_name1" type="text" class="grxxk6" placeholder="请输入公司名称" value="{{ tResumeWork1.company_name|default:'' }}">
                            <input type="hidden" id="workId1" value="{{ tResumeWork1.id }}" />
                        </li>
                        <li class="grxxk10 mt20">
{#                            <div id="positionDiv1" onclick="PositionControlsShow(1,this)"></div>#}
                            <input type="text" id="positionValue1" class="grxxk6" name="positionValue1" placeholder="请输入职位名称" maxlength="20" value="{{ tResumeWork1.position|default:'' }}" >
{#                        	<input name="" type="button" class="grxxk7" value="你的职位">#}
{#                            <em></em>#}
{#                            <ul class="slide" style="width: 348px;">#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                            </ul>#}
                        </li>
                        <li class="mt20" style="position: relative;">
                        	<div class="grxxk4">
                                <input readonly="readonly" name="start_time1" class="jlsjk fz14" type="text" onClick="WdatePicker({maxDate: new Date()})"  style="border:1px solid #E2E2E2;width: 140px" placeholder="请选择入职时间" value="{{ tResumeWork1.start_time | date:"Y-m-d"  }}">
{#                            	<input name="" type="button" class="grxxk5" value="开始时间" />#}
{#                                <em></em>#}
{#                                <ul class="slide" style="width: 163px;right: 0px">#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                            </ul>#}
                            </div>
                         	 <div class="grxxk4 pl20">
                                 <input readonly="readonly" name="end_time1" class="jlsjk fz14" type="text" onClick="WdatePicker()"  style="border:1px solid #E2E2E2;width: 140px" placeholder="请选择离职时间" value="{{ tResumeWork1.end_time | date:"Y-m-d"  }}">
{#                            <input name="" type="button" class="grxxk5" value="结束时间" />#}
{#                             <em></em>#}
{#                             <ul class="slide" style="width: 163px;right: 0px">#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                            </ul>#}
                          </div>
                          <div class="zj" onclick="active(this);"><span class="radio"><i></i></span><label class="n">至今</label>
                            </div>
                          <!-- aa.getFullYear()+"-"+aa.getMonth()+1+"-"+aa.getDate() -->
              				<div class="clear"></div>
                        </li>
                        <!-- <li class="pt20"></li>
                        <li class="pt20 bt1db7">
                        	<input name="pc_name2" type="text" class="grxxk6" placeholder ="公司名称" value="{{ tResumeWork2.company_name|default:'' }}">
                            <input type="hidden" id="workId2" value="{{ tResumeWork2.id }}" />
                        </li>
                        <li class="grxxk10 mt20">
                            <div id="positionDiv2" onclick="PositionControlsShow(1,this)"></div>
                            <input type="hidden" id="positionValue2" name="positionValue2"  value="{{ tResumeWork2.position|default:'' }}" >
{#                        	<input name="" type="button" class="grxxk7" value="你的职位">#}
{#                            <em></em>#}
{#                            <ul class="slide" style="width: 348px;">#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                            </ul>#}
                        </li>
                        <li class="mt20">
                        	<div class="grxxk4">
                                <input readonly="readonly" name="start_time2" class="jlsjk fz14" type="text" onClick="WdatePicker({maxDate: new Date()})"  style="border:1px solid #E2E2E2;width: 140px" placeholder="请选择入职时间" value="{{ tResumeWork2.start_time | date:"Y-m-d"  }}">
{#                            	<input name="" type="button" class="grxxk5" value="开始时间" />#}
{#                                <em></em>#}
{#                                <ul class="slide" style="width: 163px;right: 0px">#}
{#                                    <li>11</li>#}
{#                                    <li>11</li>#}
{#                                    <li>11</li>#}
{#                                    <li>11</li>#}
{#                                </ul>#}
                            </div>
                         	<div class="grxxk4 pl20">
                                <input readonly="readonly" name="end_time2" class="jlsjk fz14" type="text" onClick="WdatePicker()"  style="border:1px solid #E2E2E2;width: 140px" placeholder="请选择离职时间" value="{{ tResumeWork2.end_time | date:"Y-m-d"  }}">
{#                            <input name="" type="button" class="grxxk5" value="结束时间" />#}
{#                            <em></em>#}
{#                            <ul class="slide" style="width: 163px;right: 0px">#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                                <li>11</li>#}
{#                            </ul>#}
                          </div> -->
              				<div class="clear"></div>
                        </li>
                        
                    </ul>
                    <div class="addjl" style="cursor: pointer;" onclick="window.alert('你可先保存这条工作经历，进入系统再添加工作经历');">
                        <span style="font-size: 14px;"><i class="iconfont icon-jiahao"></i>添加更多工作经历</span>
                    </div>
                    <div class="xiayibu">
                        <input type="button" style="cursor: pointer;" value="下一步：教育经历" onclick="saveWorkInfo(this)" />
                        <a href="/system/hcdygrydFirst">返回</a>
                    </div>
                    </form>
                </div>
            
            	
                
            </div>
            <div class="grwzbq" style="top:29px; right:-15px;">工作经历</div>
        </div>
    </div>

</div>

<!-- 填写基本信息红包start -->
<script>
    function write_info(){
        layer.open({
            type: 1,
            area: ['420px','475px'],
            title:"",
            fix: true, //不固定
            maxmin: false,
            skin: 'o_hb',
            closeBtn:"1",
            content: $(".jbxx_hb"),
            success:function(layero, index){
                var o_index = index;
                $(layero).find('.go').click(function(event) {
                    layer.close(o_index);
                });
            }
        });
    }

    function write_info1(){
        layer.open({
            type: 1,
            area: ['380px','540px'],
            title:"",
            fix: true, //不固定
            maxmin: false,
            skin: 'o_hb',
            closeBtn:"1",
            content: $(".jl_hb"),
            success:function(layero, index){
                var o_index = index;
                $(layero).find('.go').click(function(event) {
                    layer.close(o_index);
                });
            }
        });
    }
</script>
<div class="info_hb jbxx_hb">
<span class="gold">100</span>
 <h1>
     <img src="{{ STATIC_URL }}images/wx.png" alt="">
     <span>温馨提示</span>
 </h1>
    <p>完成基本信息填写，</p>
    <p>奖励<span>100</span>经验值哦！</p>
    <button class="go">马上去></button>
    <img src="{{ STATIC_URL }}images/cd.png" alt="" class="abs">
</div>
<!-- ////////////////////////////// -->
<div class="info_hb jl_hb">
 <h1>
     <p>哇~恭喜你，获得奖励</p>
     <p class="mt"><span>100</span>经验值！</p>
 </h1>

    <button class="go" style="margin-top: 120px;">确定</button>
    <img src="{{ STATIC_URL }}images/cd.png" alt="" class="abs">
    <img src="{{ STATIC_URL }}images/cd1.png" alt="" style="top: 50%;left: -50px;" class="abs">
    <img src="{{ STATIC_URL }}images/100_1.png" alt="" style="top: 55%;left: 80px;" class="abs">
    <img src="{{ STATIC_URL }}images/100_2.png" alt="" style="top: 60%;right: 60px;" class="abs">
</div>
<!-- 填写基本信息红包end -->

<script>
    //初始化职位
    $(function(){
        PositionControls("positionDiv1","{{ tResumeWork1.positionname }}","{{ tResumeWork1.position }}", 'width:333px;margin-top:5px;height:auto;font-size:14px;');
{#        PositionControls("positionDiv2","{{ tResumeWork2.positionname }}","{{ tResumeWork2.position }}", 'width:333px;margin-top:5px;height:auto;font-size:14px;');#}
    });
    $(".slide").siblings('input').click(function(event) {
        $(".slide").slideUp(150);
            if($(this).siblings('.slide').css("display")=="none")
        {
            $(this).siblings('.slide').slideDown(150);
        }else{
            $(this).siblings('.slide').slideUp(150);
        }
    });
    $(".slide li").click(function(event) {
        $(this).parent().siblings('input').val($(this).text());
        $(this).parent("").slideUp(150);

    });
    //保存工作经历
    function saveWorkInfo(obj){
        var workId1 = $('#workId1').val();
        var workId2 = $('#workId2').val();
        var pc_name1 = $('input[name="pc_name1"]').val();
        var pc_name2 = $('input[name="pc_name2"]').val();
        var position1 = $('#positionValue1').val();
        var position2 = $('#positionValue2').val();
        var startDate1 = $('input[name="start_time1"]').val();
        var endDate1 = $('input[name="end_time1"]').val();
        var startDate2 = $('input[name="start_time2"]').val();
        var endDate2 = $('input[name="end_time2"]').val();
        if(pc_name1 == '' && pc_name2 == ''){
            window.alert('请至少填写一个完整工作经历，或点击返回进入个人首页',2);
            return;
        }
        if(pc_name1 != ''){
            if(position1 == ''){
                window.alert('请选择职位',2);
                return;
            }
            if(startDate1 == ''){
                window.alert('请选择入职日期',2);
                return;
            }
            if(endDate1 == ''){
                window.alert('请选择离职日期',2);
                return;
            }
            if (endDate1 != "至今" && startDate1 > endDate1) {
                alert("您输入的起始日期大于结束日期!",2);
                return false;
            }
        }
        if(pc_name2 != ''){
            if(position2 == ''){
                window.alert('请选择职位',2);
                return;
            }
            if(startDate2 == ''){
                window.alert('请选择入职日期',2);
                return;
            }
            if(endDate2 == ''){
                window.alert('请选择离职日期',2);
                return;
            }
        }
        $(obj).addClass('load_btn').attr('disabled', 'true');
        $.ajax({
            type: "POST",
            url: "/system/ajax_saveWorkInfo",
            data: {"workId1": workId1, "pc_name1": pc_name1, "position1": position1, "startDate1": startDate1, "endDate1": endDate1},
            dataType: "json",
            success: function (data) {
                if(data.msg == 'success'){
                    window.alert('保存成功',1);
                    window.location = '/system/hcdygrydThird';
                }else{
                    window.alert(data.msg,2);
                    $(obj).removeClass('load_btn').removeAttr('disabled');
                }
            }
        });
    }
</script>

</body>

</html>